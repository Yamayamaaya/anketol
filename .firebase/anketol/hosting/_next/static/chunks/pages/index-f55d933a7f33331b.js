(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6696:function(e,t,n){"use strict";n.d(t,{Td:function(){return x},Th:function(){return m},Tr:function(){return p},hr:function(){return f},iA:function(){return d},p3:function(){return h},xJ:function(){return o}});var r=n(7294),a=n(7976),s=n(4520),l=n(8387),i=(...e)=>e.filter(Boolean).join(" "),[u,c]=(0,l.k)({name:"TableStylesContext",errorMessage:"useTableStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Table />\" "}),d=(0,a.Gp)((e,t)=>{let n=(0,a.jC)("Table",e),{className:l,...c}=(0,s.Lr)(e);return r.createElement(u,{value:n},r.createElement(a.m$.table,{ref:t,__css:n.table,className:i("chakra-table",l),...c}))});d.displayName="Table";var o=(0,a.Gp)((e,t)=>{let{overflow:n,overflowX:s,className:l,...u}=e;return r.createElement(a.m$.div,{ref:t,className:i("chakra-table__container",l),...u,__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:n??s??"auto",overflowY:"hidden",maxWidth:"100%"}})});(0,a.Gp)((e,t)=>{let{placement:n="bottom",...s}=e,l=c();return r.createElement(a.m$.caption,{...s,ref:t,__css:{...l.caption,captionSide:n}})}).displayName="TableCaption";var f=(0,a.Gp)((e,t)=>{let n=c();return r.createElement(a.m$.thead,{...e,ref:t,__css:n.thead})}),h=(0,a.Gp)((e,t)=>{let n=c();return r.createElement(a.m$.tbody,{...e,ref:t,__css:n.tbody})});(0,a.Gp)((e,t)=>{let n=c();return r.createElement(a.m$.tfoot,{...e,ref:t,__css:n.tfoot})});var m=(0,a.Gp)(({isNumeric:e,...t},n)=>{let s=c();return r.createElement(a.m$.th,{...t,ref:n,__css:s.th,"data-is-numeric":e})}),p=(0,a.Gp)((e,t)=>{let n=c();return r.createElement(a.m$.tr,{...e,ref:t,__css:n.tr})}),x=(0,a.Gp)(({isNumeric:e,...t},n)=>{let s=c();return r.createElement(a.m$.td,{...t,ref:n,__css:s.td,"data-is-numeric":e})})},8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9227)}])},2727:function(e,t,n){"use strict";n.d(t,{TR:function(){return i},vx:function(){return l}});var r=n(7294),a=n(8036),s=n(9828);let l=()=>{let[e,t]=(0,r.useState)([]),[n,l]=(0,r.useState)(!0),[i,u]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let e=async()=>{try{let e=(0,a.ad)(),n=await (0,s.PL)((0,s.IO)((0,s.hJ)(e,"questionnaires"),(0,s.Xo)("createdTime","desc"))),r=n.docs.map(e=>({id:e.id,...e.data()}));t(r)}catch(i){u(i)}finally{l(!1)}};e()},[]),{questionnaires:e,loading:n,error:i}},i=e=>{let[t,n]=(0,r.useState)([]),[l,i]=(0,r.useState)(!0),[u,c]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let t=async()=>{if(e)try{let t=(0,a.ad)(),r=await (0,s.PL)((0,s.IO)((0,s.hJ)(t,"questionnaires"),(0,s.ar)("userId","==",e),(0,s.Xo)("createdTime","desc"))),l=r.docs.map(e=>({id:e.id,...e.data()}));n(l)}catch(u){c(u)}finally{i(!1)}};t()},[e]),{questionnaires:t,loading:l,error:u}}},6171:function(e,t,n){"use strict";n.d(t,{s:function(){return s}});var r=n(7294),a=n(8036);let s=e=>{let[t,n]=(0,r.useState)(null),[s,l]=(0,r.useState)(!0),[i,u]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if(!e)return;let t=async()=>{try{let t=(0,a.ad)(),r=(0,a.JU)(t,"users",e),s=await (0,a.QT)(r);if(s.exists){let i={id:s.id,...s.data()};n(i)}else n(null)}catch(c){u(c)}finally{l(!1)}};t()},[e]),{user:t,loading:s,error:i}}},9227:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(5893),a=n(6696),s=n(3345),l=n(639),i=n(9417),u=n(9603),c=n(6171),d=n(7294),o=n(8036);let f=e=>{let[t,n]=(0,d.useState)([]),[r,a]=(0,d.useState)(!0),[s,l]=(0,d.useState)(null);return(0,d.useEffect)(()=>{let t=async()=>{try{let t=(0,o.ad)(),r=await (0,o.PL)((0,o.IO)((0,o.hJ)(t,"answerLogs"),(0,o.ar)("respondentGmail","==",e))),s=r.docs.map(e=>({id:e.id,...e.data()}));n(s)}catch(i){l(i)}finally{a(!1)}};t()},[e]),{answerLogs:t,loading:r,error:s}},h=e=>{let{questionnaire:t,index:n,user:o}=e,{user:h,loading:m}=(0,c.s)(t.userId),{answerLogs:p,loading:x}=f((null==o?void 0:o.email)||"");(0,d.useEffect)(()=>{},[m,x]);let _=p.some(e=>e.formId===t.id);return(0,r.jsxs)(a.Tr,{children:[(0,r.jsx)(a.Td,{children:t.title}),(0,r.jsx)(a.Td,{children:(0,r.jsxs)("a",{href:t.url,className:"flex items-center",children:[(0,r.jsx)("span",{children:"回答する"}),(0,r.jsx)(u.G,{icon:i.wlW,size:"xs",className:"w-3 h-3 ml-1"})]})}),(0,r.jsxs)(a.Td,{className:"flex items-center",children:[(0,r.jsx)(s.qE,{flexShrink:0,width:6,height:6,src:(null==h?void 0:h.photoURL)||"default_image_url"}),(0,r.jsx)("span",{className:"ml-2 text-sm",children:null==h?void 0:h.displayName})]}),(0,r.jsx)(a.Td,{children:_?(0,r.jsx)(l.Ct,{colorScheme:"green",children:"回答済"}):(0,r.jsx)(l.Ct,{children:"未回答"})})]},n)};var m=n(1734),p=n(2727);let x=()=>{let{user:e}=(0,m.E)(),{user:t}=(0,c.s)((null==e?void 0:e.uid)||""),{questionnaires:n}=(0,p.vx)(),[s,l]=(0,d.useState)(n);return(0,d.useEffect)(()=>{l(n.filter(e=>e.userId!==(null==t?void 0:t.id)&&e.active))},[n,t]),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(a.xJ,{className:"p-8",children:(0,r.jsxs)(a.iA,{variant:"simple",children:[(0,r.jsx)(a.hr,{children:(0,r.jsxs)(a.Tr,{children:[(0,r.jsx)(a.Th,{children:"タイトル"}),(0,r.jsx)(a.Th,{children:" "}),(0,r.jsx)(a.Th,{children:"投稿者"}),(0,r.jsx)(a.Th,{children:"回答"})]})}),(0,r.jsx)(a.p3,{children:s.map((e,n)=>(0,r.jsx)(h,{questionnaire:e,index:n,user:t||void 0},n))})]})})})};var _=x},9828:function(e,t,n){"use strict";n.d(t,{EK:function(){return r.EK},IO:function(){return r.IO},JU:function(){return r.JU},PL:function(){return r.PL},QT:function(){return r.QT},Xo:function(){return r.Xo},ad:function(){return r.ad},ar:function(){return r.ar},hJ:function(){return r.hJ},oe:function(){return r.oe},r7:function(){return r.r7}});var r=n(8036)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);